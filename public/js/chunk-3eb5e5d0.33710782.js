(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3eb5e5d0"],{"4bf9":function(a,t,r){"use strict";r.r(t);var o=function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",[r("v-container",{staticClass:"admin-usuarios__container"},[r("v-row",[r("v-col",[r("show-dialog-usuario",a._b({on:{procesar:function(t){return a.procesar(t)},cerrar:function(t){return a.cerrar()}}},"show-dialog-usuario",{value:a.value},!1)),r("base-material-card",{staticClass:"px-5 py-3 mb-5",attrs:{color:"success",icon:"mdi-view-carousel",inline:"",title:"usuarios"}},[r("v-row",{staticClass:"admin-usuarios_row__nuevo"},[r("v-col",{staticClass:"text-right"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(t){var o=t.on,e=t.attrs;return[r("v-btn",a._g(a._b({staticClass:"success ma-0",on:{click:function(t){return a.abrirCrear()}}},"v-btn",e,!1),o),[a._v(" Nuevo Usuario ")])]}}])},[r("span",[a._v("Crea un nuevo Usuario")])])],1)],1),r("v-simple-table",{staticClass:"admin-usuarios__table"},[r("thead",[r("tr",[r("th",[a._v("Codigo")]),r("th",[a._v("Email")]),r("th",[a._v("Tipo")]),r("th",{staticStyle:{"text-align":"right"}},[a._v(" Acciones ")])])]),r("tbody",a._l(a.usuarios,(function(t,o){return r("tr",{key:o},[r("td",[a._v(a._s(t.CodUsuario))]),r("td",[a._v(a._s(t.Nombre))]),r("td",[a._v(a._s(t.TipoUsuario))]),r("td",{staticClass:"text-right"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(o){var e=o.on,i=o.attrs;return[r("v-btn",a._g(a._b({staticClass:"warning btn-edit",attrs:{small:""},on:{click:function(r){return a.abrirEditar(t.CodUsuario)}}},"v-btn",i,!1),e),[r("v-icon",[a._v("mdi-pencil")])],1)]}}],null,!0)},[r("span",[a._v("Editar")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:a._u([{key:"activator",fn:function(o){var e=o.on,i=o.attrs;return[r("v-btn",a._g(a._b({staticClass:"error btn-delete",attrs:{small:""},on:{click:function(r){return a.eliminar(t.CodUsuario,t.Nombre)}}},"v-btn",i,!1),e),[r("v-icon",[a._v(" mdi-trash-can ")])],1)]}}],null,!0)},[r("span",[a._v("Eliminar")])])],1)])})),0)])],1)],1)],1)],1)],1)},e=[],i=r("5530"),s=(r("d3b7"),r("3ca3"),r("ddb0"),r("a9e3"),r("c740"),r("a434"),r("2b0e")),n=r("2f62"),u=r("9c9e"),c={components:{ShowDialogUsuario:function(){return Promise.resolve().then(r.bind(null,"031b"))}},mixins:[u["a"]],data:function(){return{value:{active:!1,usuario:{CodUsuario:"",Nombre:"",Email:"",Password:"",Sexo:"",TipoUsuario:""},imagen:null,loader:!1,usuariosTipos:[]},usuarios:""}},computed:Object(i["a"])({},Object(n["e"])(["token"])),created:function(){this.getUsuarios(),this.getUsuariosTipos()},methods:Object(i["a"])(Object(i["a"])({},Object(n["d"])(["cerrarSesion"])),{},{getUsuarios:function(){var a=this;s["a"].axios.get("/api/usuarios").then((function(t){a.usuarios=t.data.result})).catch((function(a){console.log(a.response)}))},getUsuariosTipos:function(){var a=this;s["a"].axios.get("/api/usuarios/tipos").then((function(t){a.value.usuariosTipos=t.data.result})).catch((function(a){console.log(a.response)}))},getUsuario:function(a){var t=this;s["a"].axios.get("/api/usuarios/".concat(a)).then((function(a){t.value.usuario=a.data.result[0],t.value.usuario.Sexo=Number(t.value.usuario.Sexo),t.value.usuario.Password=""})).catch((function(a){console.log(a.response)}))},abrirEditar:function(a){this.getUsuario(a),this.value.active=!0},abrirCrear:function(){this.value.active=!0},cerrar:function(){this.value.active=!1,this.value.usuario={},this.value.imagen=null,this.value.loader=!1},procesar:function(a){console.log("procesando..."),this.value.loader=!0;var t={"x-token":this.token},r=new FormData;r.append("codUsuario",a.usuario.CodUsuario),r.append("nombre",a.usuario.Nombre),r.append("email",a.usuario.Email),r.append("password",a.usuario.Password),r.append("tipoUsuario",a.usuario.TipoUsuario),r.append("sexo",a.usuario.Sexo),r.append("imagen",a.imagen),a.usuario.CodUsuario?this.update(r,t):this.create(r,t)},create:function(a,t){var r=this;s["a"].axios.post("/api/usuarios",a,{headers:t}).then((function(a){r.usuarios.unshift(a.data.usuario[0]),r.cerrar(),s["a"].swal("Usuario Creado","","success")})).catch((function(a){r.cerrar(),r.swalAlertError(a)}))},update:function(a,t){var r=this;console.log("editando"),s["a"].axios.put("/api/usuarios",a,{headers:t}).then((function(a){var t=r.usuarios.findIndex((function(t){return t.CodUsuario===Number(a.data.usuario[0].CodUsuario)}));r.usuarios[t].Nombre=a.data.usuario[0].Nombre,r.usuarios[t].TipoUsuario=a.data.usuario[0].TipoUsuario,r.cerrar(),s["a"].swal("Usuario Actualizado","","success")})).catch((function(a){r.cerrar(),r.swalAlertError(a)}))},eliminar:function(a,t){var r=this;s["a"].swal({title:"EstÃ¡s seguro que deseas borrar a ".concat(t,"?"),showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#ff5252",cancelButtonColor:"#a1a1a1"}).then((function(t){t.isConfirmed&&(s["a"].swal("Usuario Eliminado","","success"),s["a"].axios.delete("/api/usuarios/".concat(a),{headers:{"x-token":r.token}}).then((function(a){var t=r.usuarios.findIndex((function(t){return t.CodUsuario===Number(a.data.codUsuario)}));r.usuarios.splice(t,1)})).catch((function(a){r.cerrar(),r.swalAlertError(a)})))}))}})},l=c,d=r("2877"),p=r("6544"),f=r.n(p),v=r("8336"),b=r("62ad"),m=r("a523"),h=r("132d"),g=r("0fd9"),_=r("1f4f"),C=r("3a2f"),w=Object(d["a"])(l,o,e,!1,null,null,null);t["default"]=w.exports;f()(w,{VBtn:v["a"],VCol:b["a"],VContainer:m["a"],VIcon:h["a"],VRow:g["a"],VSimpleTable:_["a"],VTooltip:C["a"]})},"9c9e":function(a,t,r){"use strict";var o=r("5530"),e=(r("ac1f"),r("5319"),r("d3b7"),r("25f0"),r("1276"),r("a15b"),r("2b0e")),i=r("2f62");t["a"]={methods:Object(o["a"])(Object(o["a"])({},Object(i["d"])(["cerrarSesion"])),{},{formatNumberBySeparator:function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)},swalAlertError:function(a){e["a"].swal({title:a.response.data.title,text:a.response.data.text,icon:"error"}),!a.response.data.code||"token-timed-out"!==a.response.data.code&&"no-token"!==a.response.data.code&&"invalid-user"!==a.response.data.code||this.cerrarSesion()},getDateByDateTime:function(a){var t=a.substring(0,a.indexOf("T")),r=t.split("-"),o=r.reverse();return o.join("-")},getTimeByDateTime:function(a){var t=a.substring(a.indexOf("T")+1),r=t.split(":");return r[0]+":"+r[1]},debounce:function(a,t){var r=null;return function(){clearTimeout(r);var o=arguments,e=this;r=setTimeout((function(){a.apply(e,o)}),t)}}})}},a523:function(a,t,r){"use strict";r("4de4"),r("b64b"),r("2ca0"),r("99af"),r("20f6"),r("4b85"),r("498a"),r("a15b");var o=r("2b0e");function e(a){return o["a"].extend({name:"v-".concat(a),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,r){var o=r.props,e=r.data,i=r.children;e.staticClass="".concat(a," ").concat(e.staticClass||"").trim();var s=e.attrs;if(s){e.attrs={};var n=Object.keys(s).filter((function(a){if("slot"===a)return!1;var t=s[a];return a.startsWith("data-")?(e.attrs[a]=t,!1):t||"string"===typeof t}));n.length&&(e.staticClass+=" ".concat(n.join(" ")))}return o.id&&(e.domProps=e.domProps||{},e.domProps.id=o.id),t(o.tag,e,i)}})}var i=r("d9f7");t["a"]=e("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(a,t){var r,o=t.props,e=t.data,s=t.children,n=e.attrs;return n&&(e.attrs={},r=Object.keys(n).filter((function(a){if("slot"===a)return!1;var t=n[a];return a.startsWith("data-")?(e.attrs[a]=t,!1):t||"string"===typeof t}))),o.id&&(e.domProps=e.domProps||{},e.domProps.id=o.id),a(o.tag,Object(i["a"])(e,{staticClass:"container",class:Array({"container--fluid":o.fluid}).concat(r||[])}),s)}})}}]);
//# sourceMappingURL=chunk-3eb5e5d0.33710782.js.map