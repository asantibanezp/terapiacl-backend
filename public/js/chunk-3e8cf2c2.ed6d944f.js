(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e8cf2c2"],{"9c9e":function(t,a,e){"use strict";var o=e("5530"),r=(e("ac1f"),e("5319"),e("d3b7"),e("25f0"),e("1276"),e("a15b"),e("2b0e")),n=e("2f62");a["a"]={methods:Object(o["a"])(Object(o["a"])({},Object(n["d"])(["cerrarSesion"])),{},{formatNumberBySeparator:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)},swalAlertError:function(t){r["a"].swal({title:t.response.data.title,text:t.response.data.text,icon:"error"}),!t.response.data.code||"token-timed-out"!==t.response.data.code&&"no-token"!==t.response.data.code&&"invalid-user"!==t.response.data.code||this.cerrarSesion()},getDateByDateTime:function(t){var a=t.substring(0,t.indexOf("T")),e=a.split("-"),o=e.reverse();return o.join("-")},getTimeByDateTime:function(t){var a=t.substring(t.indexOf("T")+1),e=a.split(":");return e[0]+":"+e[1]},debounce:function(t,a){var e=null;return function(){clearTimeout(e);var o=arguments,r=this;e=setTimeout((function(){t.apply(r,o)}),a)}}})}},a523:function(t,a,e){"use strict";e("4de4"),e("b64b"),e("2ca0"),e("99af"),e("20f6"),e("4b85"),e("498a"),e("a15b");var o=e("2b0e");function r(t){return o["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(a,e){var o=e.props,r=e.data,n=e.children;r.staticClass="".concat(t," ").concat(r.staticClass||"").trim();var i=r.attrs;if(i){r.attrs={};var s=Object.keys(i).filter((function(t){if("slot"===t)return!1;var a=i[t];return t.startsWith("data-")?(r.attrs[t]=a,!1):a||"string"===typeof a}));s.length&&(r.staticClass+=" ".concat(s.join(" ")))}return o.id&&(r.domProps=r.domProps||{},r.domProps.id=o.id),a(o.tag,r,n)}})}var n=e("d9f7");a["a"]=r("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,a){var e,o=a.props,r=a.data,i=a.children,s=r.attrs;return s&&(r.attrs={},e=Object.keys(s).filter((function(t){if("slot"===t)return!1;var a=s[t];return t.startsWith("data-")?(r.attrs[t]=a,!1):a||"string"===typeof a}))),o.id&&(r.domProps=r.domProps||{},r.domProps.id=o.id),t(o.tag,Object(n["a"])(r,{staticClass:"container",class:Array({"container--fluid":o.fluid}).concat(e||[])}),i)}})},ae15:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-container",{staticClass:"admin-problemas-tipos__container"},[e("v-row",[e("v-col",[e("show-dialog-tipo-problema",t._b({on:{procesar:function(a){return t.procesar(a)},cerrar:function(a){return t.cerrar()}}},"show-dialog-tipo-problema",{value:t.value},!1)),e("base-material-card",{staticClass:"px-5 py-3 mb-5",attrs:{color:"success",icon:"mdi-view-carousel",inline:"",title:"Tipos de Problema"}},[e("v-row",{staticClass:"admin-problemas-tipos_row__nuevo"},[e("v-col",{staticClass:"text-right"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,r=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"success ma-0",on:{click:function(a){return t.abrirCrear()}}},"v-btn",r,!1),o),[t._v(" Nuevo Tipo ")])]}}])},[e("span",[t._v("Crea un nuevo Tipo de Problema")])])],1)],1),e("v-simple-table",{staticClass:"admin-problemas-tipos__table"},[e("thead",[e("tr",[e("th",[t._v("Codigo")]),e("th",[t._v("Nombre")]),e("th",{staticStyle:{"text-align":"right"}},[t._v(" Acciones ")])])]),e("tbody",t._l(t.tipos,(function(a,o){return e("tr",{key:o},[e("td",[t._v(t._s(a.CodTipoProblema))]),e("td",[t._v(t._s(a.NombreTipoProblema))]),e("td",{staticClass:"text-right"},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,n=o.attrs;return[e("v-btn",t._g(t._b({staticClass:"warning btn-edit",attrs:{small:""},on:{click:function(e){return t.abrirEditar(a.CodTipoProblema)}}},"v-btn",n,!1),r),[e("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Editar")])]),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,n=o.attrs;return[e("v-btn",t._g(t._b({staticClass:"error btn-delete",attrs:{small:""},on:{click:function(e){return t.eliminar(a.CodTipoProblema,a.NombreTipoProblema)}}},"v-btn",n,!1),r),[e("v-icon",[t._v(" mdi-trash-can ")])],1)]}}],null,!0)},[e("span",[t._v("Eliminar")])])],1)])})),0)])],1)],1)],1)],1)],1)},r=[],n=e("5530"),i=(e("d3b7"),e("3ca3"),e("ddb0"),e("c740"),e("a9e3"),e("a434"),e("7db0"),e("2b0e")),s=e("2f62"),l=e("9c9e"),c={name:"Problemas",components:{ShowDialogTipoProblema:function(){return Promise.resolve().then(e.bind(null,"69da"))}},mixins:[l["a"]],data:function(){return{value:{active:!1,tipoProblema:{nombre:"",toLink:"",CodTipoProblema:"",imagen:"",descripcion:"",tratamiento:"",causas:"",problemasTitulo:"",tratamientoTitulo:"",causasTitulo:"",metaTitle:""},problemas:[],imagen:null,loader:!1},tipos:""}},computed:Object(n["a"])({},Object(s["e"])(["token"])),created:function(){this.getTipos()},methods:Object(n["a"])(Object(n["a"])({},Object(s["d"])(["cerrarSesion"])),{},{getTipos:function(){var t=this;i["a"].axios.post("/api/problemas-tipos",{fromAdmin:!0}).then((function(a){t.tipos=a.data.result})).catch((function(t){console.log(t.response)}))},getTipo:function(t){var a=this;i["a"].axios.post("/api/problemas-tipos/tipo",{codTipoProblema:t,fromAdmin:!0}).then((function(t){a.value.tipoProblema=t.data.tipoProblema})).catch((function(t){console.log(t.response)}))},getProblemas:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i["a"].axios.post("/api/problemas",{codTipoProblema:a}).then((function(a){t.value.problemas=a.data.problemas})).catch((function(t){console.log(t.response)}))},abrirCrear:function(){this.getProblemas(),this.value.active=!0},abrirEditar:function(t){this.getTipo(t),this.getProblemas(t),this.value.active=!0},eliminar:function(t,a){var e=this;i["a"].swal({title:"Est√°s seguro que deseas borrar ".concat(a,"?"),showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#ff5252",cancelButtonColor:"#a1a1a1"}).then((function(a){a.isConfirmed&&(i["a"].swal("Problema Eliminado","","success"),i["a"].axios.delete("/api/problemas-tipos/".concat(t),{headers:{"x-token":e.token}}).then((function(t){var a=e.tipos.findIndex((function(a){return a.CodTipoProblema===Number(t.data.codTipoProblema)}));e.tipos.splice(a,1)})).catch((function(t){e.cerrar(),e.swalAlertError(t)})))}))},create:function(t,a){var e=this;i["a"].axios.post("/api/problemas-tipos/crear",t,{headers:a}).then((function(t){e.tipos.unshift(t.data.TipoProblema[0]),e.cerrar(),i["a"].swal("Problema Creado","","success")})).catch((function(t){e.cerrar(),e.swalAlertError(t)}))},update:function(t,a){var e=this;console.log("editando"),i["a"].axios.put("/api/problemas-tipos/editar",t,{headers:a}).then((function(t){var a=e.tipos.findIndex((function(a){return a.CodTipoProblema===Number(t.data.codTipoProblema)}));e.tipos[a].NombreTipoProblema=e.value.tipoProblema.nombre,e.cerrar(),i["a"].swal("Problema Actualizado","","success")})).catch((function(t){e.cerrar(),e.swalAlertError(t)}))},procesar:function(t){console.log("procesando...");var a=[];if(t.problemas.find((function(t){return null!=t.checked&&!1!==t.checked})))for(var e=0;e<t.problemas.length;e++)t.problemas[e].checked&&(a.push(Number(t.problemas[e].CodProblema)),console.log(Number(t.problemas[e].CodProblema)));if(0===a.length)return i["a"].swal("Debe asociar al menos un problema de la lista","","error"),!1;this.value.loader=!0;var o={"x-token":this.token},r=new FormData;r.append("codTipoProblema",t.tipoProblema.CodTipoProblema),r.append("nombre",t.tipoProblema.nombre),r.append("descripcion",t.tipoProblema.descripcion),r.append("tratamiento",t.tipoProblema.tratamiento),r.append("causas",t.tipoProblema.causas),r.append("toLink",t.tipoProblema.toLink),r.append("problemasTitulo",t.tipoProblema.problemasTitulo),r.append("tratamientoTitulo",t.tipoProblema.tratamientoTitulo),r.append("causasTitulo",t.tipoProblema.causasTitulo),r.append("metaTitle",t.tipoProblema.metaTitle),r.append("imagen",t.imagen),r.append("problemas",a),t.tipoProblema.CodTipoProblema?this.update(r,o):this.create(r,o)},cerrar:function(){this.value.active=!1,this.value.tipoProblema={},this.value.imagen=null,this.value.loader=!1}}),metaInfo:{title:"Admin - Problemas",titleTemplate:"%s - Centro de Terapia del Comportamiento",htmlAttrs:{lang:"es",amp:!0}}},p=c,u=e("2877"),d=e("6544"),m=e.n(d),b=e("8336"),f=e("62ad"),v=e("a523"),h=e("132d"),g=e("0fd9"),P=e("1f4f"),T=e("3a2f"),C=Object(u["a"])(p,o,r,!1,null,null,null);a["default"]=C.exports;m()(C,{VBtn:b["a"],VCol:f["a"],VContainer:v["a"],VIcon:h["a"],VRow:g["a"],VSimpleTable:P["a"],VTooltip:T["a"]})}}]);
//# sourceMappingURL=chunk-3e8cf2c2.ed6d944f.js.map